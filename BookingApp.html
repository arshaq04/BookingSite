<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="design.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
    <title>Booking App</title>
</head>
<body>
    <div id="app">
        <header>
            <h1 v-text="sitename"></h1>
            <button v-on:click="showCheckout" :disabled="cart.length === 0">
                <span class="fa-solid fa-cart-shopping"></span>
                {{itemsInTheCart}}
                Checkout
            </button>
            <button v-on:click="toggleSort">Sort by Price</button>

        </header>

        <main>
            <div v-if="showProduct">
                <div v-for="product in sortedProducts">
                    <div id="product-container" class="gallery">
                        <figure>
                            <img class="resize" v-bind:src="product.image" alt="Class logo">
                        </figure>
        
                        <p v-text="product.title"></p>
                        <p v-text="product.description"></p>
                        <p>Price: £{{product.price}}</p>
        
                        <button v-if="cartFull(product)" v-on:click="addToCart(product)">Add to cart</button>
                        <button v-else disabled>Add to cart</button>

                        <span v-if="itemsLeft(product) === 0"> All out!</span>
                        <span v-else-if="itemsLeft(product) < 5"> Only {{ itemsLeft(product) }} left!</span>

                        <div>
                            <span v-for='n in product.rating'>★</span>
                            <span v-for='n in 5 - product.rating'>☆</span>
                        </div>
                    </div>
                </div>
            </div>
        
            <div v-else>
                <h2>Welcome to the Checkout Page</h2>
                <h3>Your Cart</h3>
                <ul>
                    <li v-for="product in cartItems" :key="product.id">
                        <strong>{{ product.title }}</strong> - £{{ product.price }}
                    </li>
                </ul>          
                <p v-if="cart.length === 0">Your cart is empty.</p>
                        
                <p>
                    <strong>Name: </strong>
                    <input type="text" v-model="order.name">
                </p>
                <p>
                    <strong>Tel No: </strong>
                    <input type="text" v-model="order.phone">
                </p>
                <p v-if="phoneError" style="color: red;">Invalid format!</p>
            
                <h3>Order Information</h3>
                <p><strong>Name: </strong> {{order.name}}</p>
                <p><strong>Tel No: {{order.phone}}</strong></p>
            
                <button v-on:click="submitCheckoutForm">Place Order</button>
            </div>
        </main>
        
        
    </div>
        
    <script src="products.js"></script>
    <script src="app.js"></script>
</body>
</html>
